# InfluxDB에서 결측치 발생 시 해결 방법  
- InfluxDB에서 데이터를 분석하거나 처리할 때 결측치가 발생하면 데이터의 연속성이 깨져 특정 연산(예: non_negative_derivative()) 수행이 어려워질 수 있다. 
- 이를 해결하기 위한 일반적인 접근 방법은 아래와 같다.

## 1. 데이터 수집 환경 개선  
결측치 발생을 방지하기 위해 수집 환경을 최적화하는 근본적인 방법
- 수집 주기와 안정성 점검
  - 데이터 수집 주기를 재검토하고, 로그를 분석하여 결측치 발생 원인을 파악한다. 
  - 네트워크 지연, 장비 상태 불안정, 자원 부족(CPU/메모리 등)이 주요 원인일 수 있다. 
- 환경 개선
  데이터 수집 도구를 업그레이드하거나 설정을 최적화하여 데이터 유입이 일정하고 안정적으로 유지되도록 한다. 

## 2. 대체 수집원 또는 백업 경로 활용  
결측이 반복적으로 발생하는 경우, 추가적인 데이터 수집 경로를 확보하여 동일한 데이터를 보완적으로 수집한다.  
- 예를 들어, 다른 장비를 통해 같은 메트릭을 수집하거나 로그를 활용한 대체 데이터를 마련할 수 있다.

## 3. 결측 구간 보완: 보간(Interpolation) 및 백필(Backfill)  
이미 발생한 결측 구간을 보완하기 위한 후처리 방법

### 3-1. 보간(Interpolation)
- 결측 구간의 값을 앞뒤 데이터 값을 기반으로 추정한다. 예를 들어, t1 시점 값이 100이고 t2 시점 값이 120일 때, t1과 t2 사이의 누락된 값을 선형 보간으로 110으로 추정할 수 있다.  
  - InfluxDB에서는 복잡한 보간 처리가 제한적이므로 외부 스크립트로 데이터를 보완한 후 InfluxDB를 업데이트하는 방법이 효과적이다.  

### 3-2. 백필(Backfill)
- 누락된 데이터를 나중에라도 수집할 수 있는 경우, 데이터를 사후에 InfluxDB에 삽입하여 결측 구간을 채울 수 있다. 
- 이를 통해 데이터의 연속성을 복구하고 연산의 정확성을 높일 수 있다.

### 3-2. 단순 대체
- 결측 구간을 이전 값, 평균값, 또는 특정 고정 값(예: 0)으로 대체하는 방법도 있다. 
- 다만, 이러한 방식은 실제 데이터와의 차이가 발생할 수 있으므로 신중히 선택해야 한다.
